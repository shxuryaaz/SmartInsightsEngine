<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Insights Dashboard</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #0f0f0f;
      color: #f0f0f0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      height: 100vh;
    }

    .left-panel {
      flex: 1;
      padding: 40px;
      overflow-y: auto;
    }

    .right-panel {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #0f0f0f;
    }

    .right-panel img {
      max-width: 90%;
      height: auto;
      object-fit: contain;
      filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.05));
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      border-bottom: 2px solid #333;
      padding-bottom: 10px;
    }

    h2 {
      font-size: 1.5em;
      margin-top: 40px;
      margin-bottom: 10px;
      color: #ddd;
    }

    input, textarea {
      width: 100%;
      padding: 12px 14px;
      background-color: #1a1a1a;
      color: #fff;
      border: 1px solid #333;
      border-radius: 6px;
      font-size: 1em;
    }

    input:focus, textarea:focus {
      border-color: #555;
      outline: none;
    }

    button {
      background-color: #1e1e1e;
      color: white;
      border: 1px solid #333;
      padding: 10px 18px;
      font-size: 0.95em;
      border-radius: 6px;
      margin-top: 10px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2c2c2c;
    }

    .result-box {
      background-color: #1a1a1a;
      border: 1px solid #333;
      padding: 14px;
      margin-top: 14px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.95em;
      white-space: pre-wrap;
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      .right-panel {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- Left Panel -->
  <div class="left-panel">
    <h1>Smart Insights Dashboard</h1>

    <!-- Semantic Search -->
    <h2>Semantic Search</h2>
    <input id="searchQuery" placeholder="Enter search query..." />
    <button onclick="search()">Search</button>
    <div id="searchResults" class="result-box"></div>

    <!-- Summarize Ticket -->
    <h2>Summarize Ticket</h2>
    <textarea id="ticketText" rows="6" placeholder="Paste ticket content here..."></textarea>
    <button onclick="summarize()">Summarize</button>
    <div id="summaryResult" class="result-box"></div>

    <!-- Classify Ticket -->
    <h2>Classify Ticket</h2>
    <button onclick="classify()">Classify</button>
    <div id="classifyResult" class="result-box"></div>
  </div>

  <!-- Right Panel -->
  <div class="right-panel">
    <img src="https://i.ibb.co/99Y4MmvM/De-Watermark-ai-1750584224270-removebg-preview.png" alt="Smart Insights Logo">
  </div>

  <script>
    async function search() {
      const query = document.getElementById("searchQuery").value;
      try {
        const res = await fetch('http://localhost:8003/search', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query })
        });
        const data = await res.json();
        document.getElementById("searchResults").innerText = JSON.stringify(data.results || data, null, 2);
      } catch (err) {
        document.getElementById("searchResults").innerText = "Error: " + err.message;
      }
    }

    async function summarize() {
      const text = document.getElementById("ticketText").value;
      try {
        const res = await fetch('http://localhost:8001/summarize', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text })
        });
        const data = await res.json();
        document.getElementById("summaryResult").innerText =
          data.summary || data.error || "No summary returned.";
      } catch (err) {
        document.getElementById("summaryResult").innerText = "Error: " + err.message;
      }
    }

    async function classify() {
      const text = document.getElementById("ticketText").value;
      try {
        const res = await fetch('http://localhost:8002/classify', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text })
        });
        const data = await res.json();
        document.getElementById("classifyResult").innerText =
          "Predicted Label: " + (data.label || "None");
      } catch (err) {
        document.getElementById("classifyResult").innerText = "Error: " + err.message;
      }
    }
  </script>
</body>
</html>
